<div ng-controller="OrderCtrl" id="mainOrderDiv">

    <div id="alerts">
        <alert ng-repeat="alert in alerts" type="{{alert.type}}" close="closeAlert($index)">{{alert.msg}}</alert>
    </div>


    <div id="searchOrderDiv" class="panel panel-default">
        <h3>Search book orders</h3>

        <form class="form-inline">
            <div>
                <label class="radio-inline">
                    <input type="radio" name="orderIdSearchMode" value="orderId"
                           ng-model="orderSearch.mode" ng-checked="isOrderIdSearchMode()"/>
                    orderId
                </label>
                <label class="radio-inline">
                    <input type="radio" name="lastnameSearchMode" value="lastname" ng-model="orderSearch.mode"
                           ng-checked="!isOrderIdSearchMode()"/>
                    customer lastname
                </label>
            </div>
            <input type="text" ng-model="orderSearch.value" ng-model-instant>
            <button ng-click="searchOrder()" ng-disabled="!isValidSearch()"
                    class="btn glyphicon glyphicon-search">Search
            </button>
        </form>
    </div>

    <div id="searchResultDiv" ng-show="lastOrderSearch" ng-class="ng-hide" class="panel panel-default">
        result of search [value:{{lastOrderSearch.value}} - mode:{{lastOrderSearch.mode}}] :
        {{orderSearchResult.totalNbResults}}
        <table class="table table-striped table-condensed table-hover">
            <thead>
            <tr>
                <th class="id">orderId</th>
                <th class="name">customer</th>
            </tr>
            </thead>
            <tbody>
            <tr ng-repeat="order in orderSearchResult.orders" ng-click="selectOrder(order)">
                <td>{{order.orderId}}</td>
                <td>{{order.customerFirstname}} - {{order.customerLastname}}</td>
            </tr>
            </tbody>

        </table>
    </div>

    <div id="orderEditorDiv" ng-show="selectedOrder.editedOrder" ng-class="ng-hide" class="panel panel-default"
            >
        order {{selectedOrder.editedOrder.orderId}} is selected
        <div id="orderEditorToolbar" class="btn-group  pull-right">
            <button type="button" class="btn glyphicon glyphicon-send"
                    ng-disabled="!selectedOrder.editedOrder.needConfirmation"
                    ng-click="confirmEditedOrder()">
                Confirm
            </button>
            <button type="button" class="btn glyphicon glyphicon-share-alt" ng-disabled="!isSelectedOrderModified()"
                    ng-click="revertEditedOrder()">
                Revert
            </button>
            <button type="button" class="btn glyphicon glyphicon-save" ng-disabled="!isSelectedOrderModified()"
                    ng-click="saveEditedOrder()">
                Save
            </button>
        </div>
        <div id="orderEditor">
            <label class="radio-inline">
                amount: $USD<input type="text" ng-model="selectedOrder.editedOrder.amount"/>
            </label>
        </div>
        <div id="booksOfOrder">
            <label class="radio-inline"> books:</label>
            <table class="table table-striped table-condensed table-hover">
                <thead>
                <tr>
                    <th class="id">title</th>
                    <th class="name">isbn</th>
                    <th class="name">price</th>
                    <th class="action">action</th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="book in selectedOrder.editedOrder.books" ng-click="selectBookInOrder(book)">
                    <td>{{book.title}}</td>
                    <td>{{book.isbn}}</td>
                    <td>{{book.price}}</td>
                    <td><button type="button" class="btn glyphicon glyphicon-remove"
                                ng-click="removeBookFromEditedOrder(book)"></button></td>
                </tr>
                </tbody>
            </table>
        </div>

    </div>

</div>

